# async-api-for-cinema
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ API –¥–ª—è –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞

## üöÄ Deploy production

1. –ß—Ç–æ–±—ã –ø–æ–¥–Ω—è—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–æ–º–∞–Ω–¥ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ 
   (—É –≤–∞—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω docker compose):
- `make prod docker`
- `docker compose -f docker-compose.prod.yml up --build`

2. –ù–∞–∫–∞—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤:
- `make init migrations`

### üìô [–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞](https://github.com/DanielMorez/async-api-for-cinema/tree/dev/admin-panel/movies)

1. –ß—Ç–æ–±—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–∞–Ω–µ–ª—å—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ
```http request
http://localhost/admin/
```
   
2. –£ –≤–∞—Å –º–æ–≥—É—Ç –Ω–µ –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å—Å—è —Å—Ç–∏–ª–∏, –¥–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–π—Ç–µ –∏—Ö –∫–æ–º–∞–Ω–¥–æ–π `make staticfiles`

3. –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `make superuser in admin`

### üìò [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å API –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞](https://github.com/DanielMorez/async-api-for-cinema/tree/dev/async-api)

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ—Ç–æ–¥—ã –∏ –∫–∞–∫ —Å –Ω–∏–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –º–æ–∂–Ω–æ –ø–æ —Å—Å—ã–ª–∫–µ:
```http request
http://localhost/api/openapi
```

### üìó [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å API –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è](https://github.com/DanielMorez/async-api-for-cinema/tree/dev/auth)

```http request
http://localhost/api/v1/user/
```


## üõ† –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

1. –ß—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ —Å—Ä–µ–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –æ–¥–Ω–æ–π –∏–∑ –∫–æ–º–∞–Ω–¥: 
- `make dev docker`
- `docker compose -f docker-compose.dev.yml up --build`

2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `async-api/src/` –∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ `.env.local` –≤ `.env`, —á—Ç–æ–±—ã –±—ã–ª–æ —É–¥–æ–±–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ –≤–µ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

3. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ `async-api`: `python3.10 -m venv venv`

4. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `source venv/bin/activate`

5. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–∞–∫–∞—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏: `make init migrations`

6. –ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å `async-api` –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `async-api/src/` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: `python main.py`

–í –∏—Ç–æ–≥–µ, —É –≤–∞—Å –¥–æ–∂–Ω–æ –ø–æ—è–≤–∏—Ç—Å—è —Ç–∞–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:

```commandline
async_api                | 2022-11-28 20:40:48,652 - uvicorn.error - INFO - Started server process [1]
async_api                | 2022-11-28 20:40:48,652 - uvicorn.error - INFO - Waiting for application startup.
async_api                | 2022-11-28 20:40:48,653 - uvicorn.error - INFO - Application startup complete.
async_api                | 2022-11-28 20:40:48,655 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)

```

7. –ï—Å–ª–∏ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º postgres, —Ç–æ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —ç—Ç–∏–º [—Å–∫—Ä–∏–ø—Ç–æ–º](https://github.com/DanielMorez/new_admin_panel_sprint_1)

P.S. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏, –¥–ª—è —ç—Ç–æ–≥–æ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: `make init migrations`
