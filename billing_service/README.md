# üåü –ë–∏–ª–ª–∏–Ω–≥–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å

## üõ† –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

[![My Skills](https://skillicons.dev/icons?i=python,django,postgres,redis,docker,nginx&perline=6)](https://skillicons.dev)


## üé° –°—Ö–µ–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

![billing](architecture/billing.png)


###–°–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç 10 –º–µ—Ç–æ–¥–æ–≤

‚ùóÔ∏è–í –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `access_token` –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`Authorization: Bearer access_token`), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ `http://localhost/api/v1/user` ‚ùóÔ∏è

1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤
```http request
GET - /billing/tariffs 
```

–í–æ–∑–º–æ–∂–Ω—ã–π –æ—Ç–≤–µ—Ç

```json
{
    "count": 2,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": "70caff03-069d-4cdc-8d65-656ebceb2bcf",
            "title": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞",
            "cost": "99.99",
            "period_type": "week",
            "description": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞",
            "is_active": true,
            "trial_period": false,
            "trial_period_type": null
        },
        {
            "id": "8fe840f2-0f8b-4a58-8d56-ce26327746c3",
            "title": "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞",
            "cost": "249.99",
            "period_type": "month",
            "description": "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞",
            "is_active": true,
            "trial_period": true,
            "trial_period_type": "week"
        }
    ]
}
```

2. –î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
```http request
POST - /billing/payment-method
```

–í–µ—Ä–Ω–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –Æ–ö–∞—Å—Å—É, –ø–æ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–π—Ç–∏ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
```json
{
    "confirmation_url": "https://yoomoney.ru/checkout/payments/v2/contract?orderId=2bcf4466-000f-5000-a000-1f63903828f9"
}
```

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è, –∫–∞—Ä—Ç–∞ –ø—Ä–∏–≤—è–∂–µ—Ç—Å—è –∫ –º–∞–≥–∞–∑–∏–Ω—É –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–µ–¥–ª–æ–∂–∞—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç, –∞ –∏–º–µ–Ω–Ω–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç–Ω–¥–ø–æ–∏–Ω—Ç

3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã. 
```http request
GET - /billing/approve-payment-method/<idempotency_key>
```
–ï—Å–ª–∏ –ø–ª–∞—Ç–µ–∂ –ø—Ä–æ—à–µ–ª, —Ç–æ –±–µ–∫–µ–Ω–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ–Ω—å–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
–í –¥–∞–ª—å–Ω–µ–π—à–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–∞—Ö. 

–ë–æ–ª–ª–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–µ–π—Å—Ç–≤–∏–π 
–ø—Ä–∏–≤—è–∑–∫–∏ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ —Å—Ö–µ–º–µ –Ω–∏–∂–µ.

![billing](architecture/link_payment_method.jpeg)

4. –û—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É

```http request
POST - /billing/subscription
```

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
```json
{
    "tariff": "70caff03-069d-4cdc-8d65-656ebceb2bcf",
    "payment_method": "65fdda45-75f2-4430-9fac-771226b27adf"
}
```

–ï—Å–ª–∏ —Ç–∞—Ä–∏—Ñ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥, –∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –±—ã–ª–æ –¥–æ —ç—Ç–æ–≥–æ –ø–æ–¥–ø–∏—Å–∫–∏, —Å–æ–∑–¥–∞—Ç—Å—è –æ–±—ä–µ–∫—Ç –ø–æ–¥–ø–∏—Å–∫–∏ `Subscription` –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 
–ø—Ä–∏—Å–≤–æ–∏—Ç—Å—è —Ä–æ–ª—å `Subscriber` –±–µ–∑ –æ–ø–ª–∞—Ç—ã –∑–∞ –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥.

–ï—Å–ª–∏ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –Ω–µ –∏–º–µ–µ—Ç 3DS, —Ç–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è, —Å–æ–∑–¥–∞—Ç—Å—è –æ–±—ä–µ–∫—Ç –ø–æ–¥–ø–∏—Å–∫–∏ `Subscription` –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 
–ø—Ä–∏—Å–≤–æ–∏—Ç—Å—è —Ä–æ–ª—å `Subscriber`.

–í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –±–µ–∫–µ–Ω–¥ –≤–µ—Ä–Ω–µ—Ç —Å—Å—ã–ª–∫—É –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã, –Æ–ö–∞—Å—Å–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç –ø–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç—É –Ω–∏–∂–µ.

5. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
```http request
GET - /billing/approve-payment/<idempotency_key>
```

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞, —Å–æ–∑–¥–∞—Ç—Å—è –æ–±—ä–µ–∫—Ç –ø–æ–¥–ø–∏—Å–∫–∏ `Subscription` –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é 
–ø—Ä–∏—Å–≤–æ–∏—Ç—Å—è —Ä–æ–ª—å `Subscriber`.

6. –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
```http request
PUT - /billing/cancel-subscription
```

–ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥, —Ç–æ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã, —É –ø–æ–ª—å–∑–æ–≤–∞–µ—Ç–ª—è –æ—Ç–∑—ã–≤–∞–µ—Ç—Å—è —Ä–æ–ª—å `Subscriber` –∏ –≤ —Å—Ç–∞—Ç—É—Å–µ –æ–±—ä–µ–∫—Ç–∞ 
`Subscription` –≤—ã—Å—Ç–∞–≤–ª—è–µ–º `canceled`.

–ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª–∏—Ç—å—Å—è –º–µ–Ω—å—à–µ 2-—Ö –¥–Ω–µ–π, —Ç–æ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –∏ –≤ —Å—Ç–∞—Ç—É—Å–µ –æ–±—ä–µ–∫—Ç–∞ 
`Subscription` –≤—ã—Å—Ç–∞–≤–ª—è–µ–º `canceled`.

–ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª–∏—Ç—å—Å—è –±–æ–ª—å—à–µ 2-—Ö –¥–Ω–µ–π, —Ç–æ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã –Ω–µ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤, –∞ –≤ —Å—Ç–∞—Ç—É—Å–µ –æ–±—ä–µ–∫—Ç–∞ 
`Subscription` –≤—ã—Å—Ç–∞–≤–ª—è–µ–º `no_auto_payemnt` (—á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –±–µ–∑ –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è).

7. –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–ø–∏—Å–∫–µ
```http request
GET - /billing/subscription
```

```json
{
    "id": "c4d314e2-b319-4519-acdd-2729978a9e1c",
    "ended_at": "2023-04-23T23:55:51.141164Z",
    "status": "active",
    "created_at": "2023-04-17T02:55:51.146827+03:00",
    "modified_at": "2023-04-17T02:55:51.147097+03:00",
    "tariff": {
        "id": "70caff03-069d-4cdc-8d65-656ebceb2bcf",
        "title": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞",
        "cost": "99.99",
        "period_type": "week",
        "description": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞",
        "is_active": true,
        "trial_period": false,
        "trial_period_type": null
    },
    "payment_method": {
        "id": "65fdda45-75f2-4430-9fac-771226b27adf",
        "created_at": "2023-04-16T01:13:23.015096+03:00",
        "modified_at": "2023-04-16T01:13:23.015369+03:00",
        "card_type": "Mir",
        "expire": "12/2024",
        "last4": "2987",
        "first6": "220247"
    }
}
```

8. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã
```http request
GET - /billing/payment-method
```

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞
```json
{
    "count": 3,
    "next": null,
    "previous": null,
    "results": [
        {
            "id": "65fdda45-75f2-4430-9fac-771226b27adf",
            "created_at": "2023-04-16T01:13:23.015096+03:00",
            "modified_at": "2023-04-16T01:13:23.015369+03:00",
            "card_type": "Mir",
            "expire": "12/2024",
            "last4": "2987",
            "first6": "220247"
        },
        {
            "id": "f2b3a0b9-d837-4e24-b114-6d1937a0a970",
            "created_at": "2023-04-16T22:59:49.825714+03:00",
            "modified_at": "2023-04-16T22:59:49.825907+03:00",
            "card_type": "Mir",
            "expire": "12/2023",
            "last4": "0004",
            "first6": "220000"
        },
        {
            "id": "c7af5746-6aad-4350-b312-44bb3af24192",
            "created_at": "2023-04-17T14:45:44.742506+03:00",
            "modified_at": "2023-04-17T14:45:44.742636+03:00",
            "card_type": "Visa",
            "expire": "12/2025",
            "last4": "1111",
            "first6": "411111"
        }
    ]
}
```

9. –ü–æ–º–µ–Ω—è—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã —É –ø–æ–¥–ø–∏—Å–∫–∏
```http request
PUT - /billing/change-payment-method
```

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
```json
{"payment_method_id": "65fdda45-75f2-4430-9fac-771226b27adf"}
```

10. –û—Ç–≤—è–∑–∞—Ç—å –∫–∞—Ä—Ç—É
```http request
DELETE - /billing/payment-method/<payment_method_id>
```

## üèé –ê–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–∏
–ó–∞ –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω `celery`, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑ –≤ —á–∞—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç –¥–≤–µ —Ç–∞—Å–∫–∏:

1. `check-subscriptions` - –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–æ—à–ª–∏ –∫ –∫–æ–Ω—Ü—É –∏ –ø—Ä–æ–≤–æ–¥–∏—Ç –ø–æ –Ω–∏–º —Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤. 
   –ï—Å–ª–∏ –æ–ø–ª–∞—Ç–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (3DS), —Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–∑—ã–≤–∞–µ—Ç—Å—è —Ä–æ–ª—å `Subscriber` –¥–æ –º–æ–º–µ–Ω—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
   –ï—Å–ª–∏ –æ–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—à–ª–∞, —Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–∑—ã–≤–∞–µ—Ç—Å—è —Ä–æ–ª—å `Subscriber` –¥–æ –º–æ–º–µ–Ω—Ç–∞ –æ–ø–ª–∞—Ç—ã, –∞ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å `waiting`, –∫–æ—Ç–æ—Ä—ã–π –∞–∫—Ç–∏–≤–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏.
   
2. `check-subscriptions-without-auto-payment` - –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–æ—à–ª–∏ –∫ –∫–æ–Ω—Ü—É –∏ –∏–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å `no_auto_payment`. –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–∑—ã–≤–∞–µ—Ç—Å—è —Ä–æ–ª—å `Subscriber`.

## ü™Ñ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

0. –ü–æ–¥–Ω–∏–º–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã `postgres`, `redis`, `auth` –∏ `notification`.
1. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ `.env.sample` -> `.env`, —É–∫–∞–∑–∞–≤ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã `python manage.py runserver` –∏ `celery -A app worker -B`, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å.


## üîë –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ª—É—á—à–µ —É–∫–∞–∑–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –æ—Ç –Æ–ö–∞—Å—Å—ã, –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –º—ã –ø—Ä–∏–ª–æ–∂–∏–ª–∏ —Å–≤–æ–∏ –æ—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞.

–¢–∞–∫–∂–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ä–æ–ª—å `Subscriber` –≤ —Å–µ—Ä–≤–∏—Å–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ OpenAPI –ø–æ `http://localhost/api/v1/user/`) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏. 


## üöÄ –ó–∞–ø—É—Å–∫
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞.
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–æ–º–∞–Ω–¥:

- `make dev docker`
- `make prod docker`

–ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –ø–µ—Ä–≤—ã–π —Ä–∞–∑, —Ç–æ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –Ω–∞–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–æ–π `init migrations`