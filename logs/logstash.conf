input {
  gelf {
    type => "docker"
    port => "5044"
  }
  # heartbeat {
  #   interval => 10
  # }
#   file {
#     path => ["/var/log/nginx/access-log.json"]
#     codec => "json"
#     tags => ["nginx"]
#   }
  # beats {
  #   port => 5044
  #   host => "0.0.0.0"
  #   tags => ["nginx"]
  #   codec => "json"
  # }
}
output {
  elasticsearch {
    hosts => [ "es:9200" ]
    index => "nginx-%{+YYYY.MM.dd}"
  }
  # if "nginx" in [tags] {
  #     elasticsearch {
  #       hosts => [ "${ES_HOST}" ]
  #       index => "nginx-%{+YYYY.MM.dd}"
  #     }
  # } else {
  #     elasticsearch {
  #         hosts => [ "${ES_HOST}" ]
  #         index => "app-%{+YYYY.MM}"
  #     }
  # }
}